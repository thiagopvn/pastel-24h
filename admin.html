<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Administrativo - Pastelaria 24h</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="src/css/style.css">
    <!-- Firebase App (Core) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <!-- Firebase Authentication -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <!-- Firebase Firestore -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <!-- Google Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'pastel-orange': {
                            50: '#FFF7ED',
                            100: '#FFEDD5',
                            200: '#FED7AA',
                            300: '#FDBA74',
                            400: '#FB923C',
                            500: '#F97316',
                            600: '#EA580C',
                            700: '#C2410C',
                            800: '#9A3412',
                            900: '#7C2D12',
                        },
                    },
                    fontFamily: {
                        sans: ['Poppins', 'sans-serif'],
                    },
                    boxShadow: {
                        'card': '0 10px 30px -5px rgba(249, 115, 22, 0.2)',
                        'inner-glow': 'inset 0 2px 4px 0 rgba(249, 115, 22, 0.06)',
                    },
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f8f9fd;
        }
        
        .bg-admin-gradient {
            background: linear-gradient(to right, #9A3412, #C2410C, #EA580C);
        }

        .custom-shadow {
            box-shadow: 0 4px 20px -5px rgba(249, 115, 22, 0.25);
        }
        
        .bg-pattern {
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23f97316' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        
        .tab-button {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .tab-button::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 50%;
            width: 0;
            height: 3px;
            background-color: #F97316;
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }
        
        .tab-button.active::after {
            width: 80%;
        }
        
        .tab-content {
            transition: all 0.3s ease;
        }
        
        /* Animações e efeitos */
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(249, 115, 22, 0.4);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(249, 115, 22, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(249, 115, 22, 0);
            }
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Estilos para cards de relatório */
        .report-card {
            transition: all 0.3s ease;
            height: 100%;
        }
        
        .report-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(249, 115, 22, 0.15);
        }
        
        .alert-item {
            transition: all 0.2s ease;
        }
        
        .alert-item:hover {
            transform: translateX(5px);
        }
        
        /* Estilos para tabelas em relatórios */
        .report-list {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .report-list::-webkit-scrollbar {
            width: 8px;
        }
        
        .report-list::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        .report-list::-webkit-scrollbar-thumb {
            background: #EA580C;
            border-radius: 10px;
        }
        
        .report-list::-webkit-scrollbar-thumb:hover {
            background: #C2410C;
        }
        
        /* Estilos para formulários */
        .input-focus:focus {
            outline: none;
            border-color: #F97316;
            box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1);
        }
    </style>
</head>
<body class="bg-pattern min-h-screen">
    <header class="bg-admin-gradient text-white p-4 flex justify-between items-center shadow-lg sticky top-0 z-50">
        <div class="flex items-center space-x-3">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M5 3a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2V5a2 2 0 00-2-2H5zm9 4a1 1 0 10-2 0v6a1 1 0 102 0V7zm-3 2a1 1 0 10-2 0v4a1 1 0 102 0V9zm-3 3a1 1 0 10-2 0v1a1 1 0 102 0v-1z" clip-rule="evenodd" />
            </svg>
            <h1 class="text-xl font-bold tracking-wide">Pastelaria 24h - Painel Administrativo</h1>
        </div>
        
        <div class="flex items-center">
            <div class="mr-4 bg-white bg-opacity-20 rounded-full px-3 py-1 flex items-center">
                <i class="fa fa-user-shield mr-2"></i>
                <span id="loggedInUserName" class="font-medium">Admin</span>
            </div>
            <button id="logoutButton" class="flex items-center bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50">
                <i class="fa fa-sign-out-alt mr-2"></i> Sair
            </button>
        </div>
    </header>

    <main class="container mx-auto p-4 fade-in">
        <!-- Navigation Tabs -->
        <div class="mb-6 bg-white p-4 rounded-xl shadow-card">
            <nav class="flex flex-wrap justify-center sm:justify-start gap-2">
                <button id="btnTabDashboard" class="tab-button active px-6 py-3 bg-pastel-orange-500 text-white font-semibold rounded-lg shadow hover:bg-pastel-orange-600 transition-all">
                    <i class="fas fa-chart-pie mr-2"></i>Dashboard
                </button>
                <button id="btnTabPrecos" class="tab-button px-6 py-3 bg-gray-200 text-gray-700 font-medium rounded-lg shadow hover:bg-gray-300 transition-all">
                    <i class="fas fa-tags mr-2"></i>Gerenciar Preços
                </button>
                <button id="btnTabUsuarios" class="tab-button px-6 py-3 bg-gray-200 text-gray-700 font-medium rounded-lg shadow hover:bg-gray-300 transition-all">
                    <i class="fas fa-users mr-2"></i>Gerenciar Usuários
                </button>
            </nav>
        </div>

        <!-- Dashboard Tab -->
        <section id="tabContentDashboard" class="tab-content bg-white p-6 rounded-xl shadow-card mb-8">
            <div class="flex flex-col sm:flex-row justify-between items-center mb-6 pb-4 border-b border-pastel-orange-100">
                <h2 class="text-2xl font-semibold text-pastel-orange-700 mb-4 sm:mb-0 flex items-center">
                    <i class="fas fa-chart-line mr-3"></i>Dashboard do Administrador
                </h2>
                <div class="flex flex-wrap items-center gap-2">
                    <label for="dataFiltroDashboard" class="block text-sm font-medium text-gray-700">Filtrar por Data:</label>
                    <input type="date" id="dataFiltroDashboard" class="p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-pastel-orange-500 focus:border-pastel-orange-500 input-focus">
                    <button id="btnFiltrarDashboard" class="bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg shadow-md transition-all duration-150 flex items-center">
                        <i class="fas fa-filter mr-2"></i>Filtrar
                    </button>
                </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Vendas por Produto -->
                <div class="bg-pastel-orange-50 p-5 rounded-lg shadow-sm border border-pastel-orange-100 report-card">
                    <h3 class="text-lg font-semibold text-pastel-orange-700 mb-3 pb-2 border-b border-pastel-orange-100 flex items-center">
                        <i class="fas fa-shopping-cart mr-2"></i>Vendas por Produto
                    </h3>
                    <div id="vendasPorProdutoReport" class="text-sm space-y-1 report-list p-2">
                        <div class="flex items-center justify-center h-40">
                            <div class="animate-spin rounded-full h-10 w-10 border-b-2 border-pastel-orange-500"></div>
                            <span class="ml-3 text-pastel-orange-500 font-medium">Carregando dados...</span>
                        </div>
                    </div>
                </div>
                
                <!-- Valores por Forma de Pagamento -->
                <div class="bg-pastel-orange-50 p-5 rounded-lg shadow-sm border border-pastel-orange-100 report-card">
                    <h3 class="text-lg font-semibold text-pastel-orange-700 mb-3 pb-2 border-b border-pastel-orange-100 flex items-center">
                        <i class="fas fa-credit-card mr-2"></i>Valores por Forma de Pagamento
                    </h3>
                    <div id="pagamentosReport" class="text-sm space-y-1 report-list p-2">
                        <div class="flex items-center justify-center h-40">
                            <div class="animate-spin rounded-full h-10 w-10 border-b-2 border-pastel-orange-500"></div>
                            <span class="ml-3 text-pastel-orange-500 font-medium">Carregando dados...</span>
                        </div>
                    </div>
                </div>
                
                <!-- Divergências -->
                <div class="md:col-span-2 bg-red-50 p-5 rounded-lg shadow-sm border border-red-200 report-card">
                    <h3 class="text-lg font-semibold text-red-600 mb-3 pb-2 border-b border-red-200 flex items-center">
                        <i class="fas fa-exclamation-triangle mr-2"></i>Alertas e Divergências
                    </h3>
                    <div id="divergenciasReport" class="text-sm space-y-2 report-list p-2 text-red-700">
                        <div class="flex items-center justify-center h-40">
                            <div class="animate-spin rounded-full h-10 w-10 border-b-2 border-red-500"></div>
                            <span class="ml-3 text-red-500 font-medium">Verificando divergências...</span>
                        </div>
                    </div>
                </div>
                
                <!-- Turnos Incompletos -->
                <div class="md:col-span-2 bg-yellow-50 p-5 rounded-lg shadow-sm border border-yellow-300 report-card">
                    <h3 class="text-lg font-semibold text-yellow-600 mb-3 pb-2 border-b border-yellow-200 flex items-center">
                        <i class="fas fa-clock mr-2"></i>Turnos Abertos / Incompletos
                    </h3>
                    <div id="turnosIncompletosReport" class="text-sm space-y-2 report-list p-2 text-yellow-700">
                        <div class="flex items-center justify-center h-40">
                            <div class="animate-spin rounded-full h-10 w-10 border-b-2 border-yellow-500"></div>
                            <span class="ml-3 text-yellow-600 font-medium">Verificando turnos...</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Gerenciar Preços Tab -->
        <section id="tabContentPrecos" class="tab-content bg-white p-6 rounded-xl shadow-card mb-8 hidden">
            <h2 class="text-2xl font-semibold mb-6 pb-4 border-b border-pastel-orange-100 text-pastel-orange-700 flex items-center">
                <i class="fas fa-tags mr-3"></i>Gerenciar Preços dos Produtos
            </h2>
            
            <form id="formPrecos" class="space-y-8">
                <!-- Pastéis -->
                <fieldset class="border border-gray-200 p-5 rounded-lg shadow-sm hover:shadow-md transition-all duration-300">
                    <legend class="text-lg font-semibold text-pastel-orange-700 px-3 bg-white flex items-center">
                        <i class="fas fa-utensils mr-2"></i>Pastéis
                    </legend>
                    <div id="precosPasteisContainer" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-6 gap-y-4 mt-3">
                        <div class="animate-pulse flex space-x-4">
                            <div class="flex-1 space-y-4 py-1">
                                <div class="h-4 bg-gray-200 rounded w-3/4"></div>
                                <div class="h-8 bg-gray-200 rounded"></div>
                            </div>
                        </div>
                        <div class="animate-pulse flex space-x-4">
                            <div class="flex-1 space-y-4 py-1">
                                <div class="h-4 bg-gray-200 rounded w-3/4"></div>
                                <div class="h-8 bg-gray-200 rounded"></div>
                            </div>
                        </div>
                    </div>
                </fieldset>

                <!-- Casquinhas -->
                <fieldset class="border border-gray-200 p-5 rounded-lg shadow-sm hover:shadow-md transition-all duration-300">
                    <legend class="text-lg font-semibold text-pastel-orange-700 px-3 bg-white flex items-center">
                        <i class="fas fa-ice-cream mr-2"></i>Casquinhas
                    </legend>
                    <div id="precosCasquinhasContainer" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-6 gap-y-4 mt-3">
                        <!-- Inputs de preço para casquinhas serão inseridos pelo JS -->
                    </div>
                </fieldset>

                <!-- Caldo de Cana -->
                <fieldset class="border border-gray-200 p-5 rounded-lg shadow-sm hover:shadow-md transition-all duration-300">
                    <legend class="text-lg font-semibold text-pastel-orange-700 px-3 bg-white flex items-center">
                        <i class="fas fa-glass-whiskey mr-2"></i>Caldo de Cana
                    </legend>
                    <div id="precosCaldoCanaContainer" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-6 gap-y-4 mt-3">
                        <!-- Inputs de preço para caldo de cana serão inseridos pelo JS -->
                    </div>
                </fieldset>

                <!-- Refrigerantes e Bebidas -->
                <fieldset class="border border-gray-200 p-5 rounded-lg shadow-sm hover:shadow-md transition-all duration-300">
                    <legend class="text-lg font-semibold text-pastel-orange-700 px-3 bg-white flex items-center">
                        <i class="fas fa-bottle-water mr-2"></i>Refrigerantes e Bebidas
                    </legend>
                    <div id="precosRefrigerantesContainer" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-6 gap-y-4 mt-3">
                        <!-- Inputs de preço para refrigerantes serão inseridos pelo JS -->
                    </div>
                </fieldset>
                
                <!-- Gelo -->
                <fieldset class="border border-gray-200 p-5 rounded-lg shadow-sm hover:shadow-md transition-all duration-300">
                    <legend class="text-lg font-semibold text-pastel-orange-700 px-3 bg-white flex items-center">
                        <i class="fas fa-cube mr-2"></i>Gelo
                    </legend>
                    <div id="precosGeloContainer" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-6 gap-y-4 mt-3">
                        <!-- Input de preço para gelo será inserido pelo JS -->
                    </div>
                </fieldset>

                <div class="mt-8">
                    <button type="submit" class="w-full flex items-center justify-center bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold py-4 px-6 rounded-lg text-lg shadow-lg transition-all duration-300 ease-in-out">
                        <i class="fas fa-save mr-2"></i>Salvar Alterações nos Preços
                    </button>
                    <p id="precosSalvosMsg" class="text-green-600 mt-3 text-center font-medium"></p>
                    <p id="precosErrorMsg" class="text-red-500 mt-3 text-center font-medium"></p>
                </div>
            </form>
        </section>
        
        <!-- Gerenciar Usuários Tab -->
        <section id="tabContentUsuarios" class="tab-content bg-white p-6 rounded-xl shadow-card mb-8 hidden">
            <h2 class="text-2xl font-semibold mb-6 pb-4 border-b border-pastel-orange-100 text-pastel-orange-700 flex items-center">
                <i class="fas fa-users-cog mr-3"></i>Gerenciar Usuários
            </h2>
            
            <form id="formNovoUsuario" class="mb-8 p-6 border rounded-lg bg-pastel-orange-50 shadow-sm">
                <h3 class="text-lg font-semibold text-pastel-orange-700 mb-4 flex items-center">
                    <i class="fas fa-user-plus mr-2"></i>Adicionar Novo Usuário / Associar ao Firestore
                </h3>
                <div class="p-3 bg-blue-50 border border-blue-100 rounded-lg mb-5 text-sm text-blue-800">
                    <p class="flex items-start">
                        <i class="fas fa-info-circle text-blue-600 mt-0.5 mr-2"></i>
                        <span>
                            <strong>Instrução:</strong> Primeiro, crie o usuário no <a href="https://console.firebase.google.com/" target="_blank" class="text-blue-600 hover:underline">Painel de Autenticação do Firebase</a>.
                            Depois, copie o <strong>UID</strong> gerado e insira-o abaixo junto com os outros dados para registrar o usuário no sistema.
                        </span>
                    </p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="novoUsuarioUid" class="block text-sm font-medium text-gray-700 mb-1">
                            <i class="fas fa-fingerprint mr-1"></i>UID (do Firebase Auth)
                        </label>
                        <input type="text" id="novoUsuarioUid" required 
                               class="w-full p-3 border border-gray-300 rounded-lg shadow-inner focus:ring-pastel-orange-500 focus:border-pastel-orange-500 input-focus" 
                               placeholder="UID copiado do Firebase Console">
                    </div>
                    <div>
                        <label for="novoUsuarioNome" class="block text-sm font-medium text-gray-700 mb-1">
                            <i class="fas fa-user mr-1"></i>Nome Completo
                        </label>
                        <input type="text" id="novoUsuarioNome" required 
                               class="w-full p-3 border border-gray-300 rounded-lg shadow-inner focus:ring-pastel-orange-500 focus:border-pastel-orange-500 input-focus" 
                               placeholder="Nome do Funcionário">
                    </div>
                    <div>
                        <label for="novoUsuarioEmail" class="block text-sm font-medium text-gray-700 mb-1">
                            <i class="fas fa-envelope mr-1"></i>Email (registrado no Firebase Auth)
                        </label>
                        <input type="email" id="novoUsuarioEmail" required 
                               class="w-full p-3 border border-gray-300 rounded-lg shadow-inner focus:ring-pastel-orange-500 focus:border-pastel-orange-500 input-focus" 
                               placeholder="email@example.com">
                    </div>
                    <div>
                        <label for="novoUsuarioRole" class="block text-sm font-medium text-gray-700 mb-1">
                            <i class="fas fa-user-tag mr-1"></i>Função (Role)
                        </label>
                        <select id="novoUsuarioRole" 
                                class="w-full p-3 border border-gray-300 rounded-lg shadow-inner focus:ring-pastel-orange-500 focus:border-pastel-orange-500 input-focus">
                            <option value="funcionario">Funcionário</option>
                            <option value="admin">Administrador</option>
                        </select>
                    </div>
                    <div class="md:col-span-2">
                        <label for="novoUsuarioSenha" class="block text-sm font-medium text-gray-700 mb-1">
                            <i class="fas fa-lock mr-1"></i>Senha (para referência)
                        </label>
                        <input type="password" id="novoUsuarioSenha" 
                               class="w-full p-3 border border-gray-300 rounded-lg bg-gray-200 shadow-inner" 
                               placeholder="Senha definida no Firebase Auth" readonly 
                               title="A senha é gerenciada no Firebase Authentication. Este campo é apenas para visualização caso fosse gerenciado aqui.">
                        <p class="text-xs text-gray-500 mt-1 italic">
                            A senha é gerenciada diretamente no Firebase Authentication. Este campo seria para criação direta se houvesse backend.
                        </p>
                    </div>
                </div>
                
                <button type="submit" class="mt-6 flex items-center justify-center bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-5 rounded-lg shadow-md transition-all duration-300">
                    <i class="fas fa-user-plus mr-2"></i>Adicionar/Registrar Usuário no Sistema
                </button>
                <p id="usuarioMsg" class="text-sm mt-3 text-center font-medium"></p>
            </form>
            
            <h3 class="text-lg font-semibold text-pastel-orange-700 mb-4 mt-10 pt-4 border-t flex items-center">
                <i class="fas fa-users mr-2"></i>Usuários Existentes no Sistema
            </h3>
            <div id="listaUsuariosContainer" class="space-y-4">
                <div class="flex items-center justify-center p-10">
                    <div class="animate-spin rounded-full h-10 w-10 border-b-2 border-pastel-orange-500"></div>
                    <span class="ml-3 text-pastel-orange-500 font-medium">Carregando usuários...</span>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-800 text-gray-300 py-6 mt-8">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <p class="text-lg font-semibold flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z" />
                        </svg>
                        Pastelaria 24h
                    </p>
                    <p class="text-sm text-gray-400">Painel Administrativo • v2.0</p>
                </div>
                <div class="text-sm text-gray-400">
                    <p>&copy; 2023-2025 • Todos os direitos reservados</p>
                    <p class="mt-1">Desenvolvido com tecnologias modernas para seu negócio</p>
                </div>
            </div>
        </div>
    </footer>

    <div id="connection-status" class="fixed bottom-4 right-4 flex items-center px-3 py-2 rounded-full text-sm font-medium hidden">
        <span class="status-icon w-2 h-2 rounded-full mr-2"></span>
        <span class="status-text"></span>
    </div>

    <!-- Scripts JavaScript -->
    <script src="src/js/firebase-config.js"></script>
    <script src="src/js/shared.js"></script>
    <script src="src/js/auth.js"></script>
    <script src="src/js/admin-controller.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Protege a rota, permitindo apenas acesso a usuários com a role 'admin'
            protectRoute(['admin']);

            // Configuração de navegação de abas
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');
            
            function setActiveTab(tabId) {
                // Remove active state from all tabs
                tabButtons.forEach(btn => {
                    btn.classList.remove('active', 'bg-pastel-orange-500', 'text-white', 'font-semibold');
                    btn.classList.add('bg-gray-200', 'text-gray-700', 'font-medium');
                });
                
                tabContents.forEach(content => {
                    content.classList.add('hidden');
                });
                
                // Set active state for selected tab
                const selectedButton = document.getElementById(`btnTab${tabId}`);
                const selectedContent = document.getElementById(`tabContent${tabId}`);
                
                if(selectedButton && selectedContent) {
                    selectedButton.classList.remove('bg-gray-200', 'text-gray-700', 'font-medium');
                    selectedButton.classList.add('active', 'bg-pastel-orange-500', 'text-white', 'font-semibold');
                    selectedContent.classList.remove('hidden');
                }
            }
            
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tabId = button.id.replace('btnTab', '');
                    setActiveTab(tabId);
                });
            });
            
            // Monitor de status de conexão com internet
            function updateConnectionStatus() {
                const statusEl = document.getElementById('connection-status');
                const statusIcon = statusEl.querySelector('.status-icon');
                const statusText = statusEl.querySelector('.status-text');
                
                if (navigator.onLine) {
                    statusEl.classList.remove('bg-red-100', 'text-red-700');
                    statusEl.classList.add('bg-green-100', 'text-green-700');
                    statusIcon.classList.remove('bg-red-500');
                    statusIcon.classList.add('bg-green-500');
                    statusText.textContent = 'Conectado';
                    
                    setTimeout(() => {
                        statusEl.classList.add('fade-out');
                        setTimeout(() => {
                            statusEl.classList.add('hidden');
                            statusEl.classList.remove('fade-out');
                        }, 1000);
                    }, 3000);
                } else {
                    statusEl.classList.remove('hidden', 'bg-green-100', 'text-green-700');
                    statusEl.classList.add('bg-red-100', 'text-red-700');
                    statusIcon.classList.remove('bg-green-500');
                    statusIcon.classList.add('bg-red-500');
                    statusText.textContent = 'Sem conexão';
                }
            }
            
            window.addEventListener('online', function() {
                updateConnectionStatus();
            });
            
            window.addEventListener('offline', function() {
                updateConnectionStatus();
            });
        });
    </script>
</body>
</html>